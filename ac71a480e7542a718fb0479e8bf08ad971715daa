{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ef3a7cb4_e546894d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 445
      },
      "writtenOn": "2024-05-03T11:42:23Z",
      "side": 1,
      "message": "I did a quick look and it looks good (but untested). There\u0027s a suggestion for the insertOrUpdateRating method.",
      "revId": "ac71a480e7542a718fb0479e8bf08ad971715daa",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5cb7c2c2_4d8562fa",
        "filename": "SpecialChangeRating.php",
        "patchSetId": 1
      },
      "lineNbr": 168,
      "author": {
        "id": 445
      },
      "writtenOn": "2024-05-03T11:42:23Z",
      "side": 1,
      "message": "Looks like there\u0027s a possible solution to this problem already on the current Database classes:\n\nYou can do upsert(), which if I\u0027m not mistaken, it will try insert first, then do an update if it fails. Or, based on the doc itself, use the affectedRows() to check whether the update affected a row.\n\nhttps://doc.wikimedia.org/mediawiki-core/master/php/interfaceWikimedia_1_1Rdbms_1_1IDatabase.html#a8d6992306577d84c6eac1eed6c04f325",
      "revId": "ac71a480e7542a718fb0479e8bf08ad971715daa",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    }
  ]
}